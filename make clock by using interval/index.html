<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clock using interval</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: rgb(100, 100, 100);
            min-height: 100vh;
            display: grid;
            place-content: center;
            font-family: Arial, Helvetica, sans-serif;
        }
        
        .container {
            border: 1px solid #eee;
            border-radius: 10px;
            background-color: #999;
            padding: 1rem;
            box-shadow: 5px 5px rgba(238, 238, 238, 0.5);
            width: fit-content;
        }
        
        .clock {
            display: grid;
            grid-template-columns: repeat(4, 5rem);
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .clock div {
            background-color: black;
            border-radius: 5px;
            text-align: center;
            line-height: 5rem;
            font-size: 3rem;
            font-weight: 900;
            color: aqua;
        }
        
        .laps {
            text-align: end;
            width: 402px;
            height: 200px;
            overflow-y: scroll;
        }
        
        .btns {
            display: flex;
            justify-content: space-around;
        }
        
        .btns button {
            width: 4rem;
            text-align: center;
            background-color: black;
            border: none;
            border-radius: .4rem;
            color: white;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Clock mechanism</h1>
        <div class="clock">
            <div id="hours"></div>
            <div id="minuts"></div>
            <div id="seconds"></div>
            <div id="mseconds"></div>
        </div>
        <div class="btns">
            <button>run</button><button>pause</button><button>lap</button><button>reset</button>
        </div>
    </div>
    <div class="container laps"></div>
    <script>
        let s = 0
        let m = 0
        let h = 0
        let ms = 0
        let clock = null
        let lapNum = 0
        const printClock = () => {
            if (ms < 10)
                mseconds.textContent = '0' + ms
            else
                mseconds.textContent = ms
            if (s < 10)
                seconds.textContent = '0' + s
            else
                seconds.textContent = s
            if (m < 10)
                minuts.textContent = '0' + m
            else
                minuts.textContent = m
            if (h < 10)
                hours.textContent = '0' + h
            else
                hours.textContent = h
        }
        const timeRuning = () => {
            ms++
            if (ms == 100) {
                ms = 0
                s++
                if (s == 60) {
                    s = 0
                    m++
                    if (m == 60) {
                        m = 0
                        h++
                        printClock()
                    } else
                        printClock()
                } else
                    printClock()
            } else
                printClock()
        }
        const buttons = document.querySelectorAll('.btns button')
        const btnRem = () => {
            for (let i = 0; i < buttons.length; i++) {
                buttons[i].style.visibility = 'hidden'
            }
        }
        const btnShow = (x) => {
            buttons[x].style.visibility = null
        }
        printClock()
        btnRem()
        btnShow(0)
        document.addEventListener('click', (event) => {
            if (event.target == document.querySelector('.btns button:first-child')) {
                clock = setInterval(timeRuning, 10)
                btnRem()
                btnShow(1)
                btnShow(2)
                btnShow(3)
            } else if (event.target == document.querySelector('.btns button:nth-child(2)')) {
                clearInterval(clock)
                btnRem()
                btnShow(0)
                btnShow(3)
            } else if (event.target == document.querySelector('.btns button:nth-child(3)')) {
                lapNum++
                const lap = document.createElement('p')
                lap.textContent = lapNum + ' -------------- ' + hours.textContent + ":" + minuts.textContent + ':' + seconds.textContent + '.' + mseconds.textContent
                document.querySelector('.laps').prepend(lap)
            } else if (event.target == document.querySelector('.btns button:last-child')) {
                clearInterval(clock)
                ms = 0
                s = 0
                m = 0
                h = 0
                printClock()
                document.querySelector('.laps').innerHTML = null
                btnRem()
                btnShow(0)
                lapNum = 0
            }
        })
    </script>
</body>

</html>